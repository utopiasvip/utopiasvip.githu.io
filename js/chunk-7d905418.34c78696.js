(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d905418"],{c978:function(e,t,n){},cc6d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-overlay",{staticClass:"bind-inviter",attrs:{show:e.visbily}},[n("div",[n("div",{staticClass:"title"},[n("span",[e._v("欢迎来到Utopia")]),n("van-icon",{attrs:{name:"cross"},nativeOn:{click:function(t){e.visbily=!1}}})],1),n("input",{directives:[{name:"model",rawName:"v-model",value:e.inviterCode,expression:"inviterCode"}],attrs:{type:"text",placeholder:"请输入6位邀请码",maxlength:"6"},domProps:{value:e.inviterCode},on:{input:function(t){t.target.composing||(e.inviterCode=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selfCode,expression:"selfCode"}],attrs:{type:"text",placeholder:"生成您的6位邀请码",maxlength:"6"},domProps:{value:e.selfCode},on:{input:function(t){t.target.composing||(e.selfCode=t.target.value)}}}),n("van-button",{on:{click:e.bind}},[e._v("确定")])],1)])},o=[],r=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("3835")),i=(n("96cf"),n("1da1")),l={data:function(){return{visbily:!1,inviterCode:null,selfCode:null}},methods:{show:function(){this.visbily=!0},bind:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,r,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(6===e.inviterCode.length&&6===e.selfCode.length){t.next=2;break}return t.abrupt("return",vant.Toast.fail("邀请码必须为6位！"));case 2:return vant.Toast.loading({message:"交易中...",loadingType:"spinner",forbidClick:!0,duration:0}),n=e.$utils.web3.utils.stringToHex(e.inviterCode.toUpperCase()),a=e.$utils.web3.utils.stringToHex(e.selfCode.toUpperCase()),t.next=7,Promise.all([e.$contracts.Relations.methods.ShortCodeToAddress(n).call(),e.$contracts.Relations.methods.ShortCodeToAddress(a).call()]);case 7:if(o=t.sent,r=Object(s["a"])(o,2),i=r[0],l=r[1],parseInt(i,16)){t.next=16;break}return vant.Toast.clear(),t.abrupt("return",vant.Toast.fail("邀请码不存在！"));case 16:if(!parseInt(l,16)){t.next=19;break}return vant.Toast.clear(),t.abrupt("return",vant.Toast.fail("该邀请码已被使用！"));case 19:e.$contracts.Relations.methods.BindRelationEx(i,a).send({from:e.$address}).on("receipt",(function(t){e.visbily=!1,e.$emit("reload"),vant.Toast.clear(),vant.Toast.success("绑定成功！")})).on("error",(function(e){console.log(e),vant.Toast.clear(),vant.Toast.fail("绑定失败！")}));case 20:case"end":return t.stop()}}),t)})))()}}},c=Object(r["a"])({},l),d=c,u=(n("ddce"),n("2877")),v=Object(u["a"])(d,a,o,!1,null,"531f2c09",null);t["default"]=v.exports},ddce:function(e,t,n){"use strict";n("c978")}}]);